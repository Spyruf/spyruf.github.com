<html>

<head>
    <title> Assignment 3: Dom Tree Lab</title>
    <link href='https://fonts.googleapis.com/css?family=Open+Sans+Condensed:300' rel='stylesheet' type='text/css'>
    <link rel="stylesheet" type="text/css" href="style.css">
</head>

<body onclick="highlight(event)">
    <center>
        <h1>Dom Tree Navigation</h1></span>
    </center>
    <div class="class">
        Apple Products
        <div class="topic">
            Computers
            <div>Mac Pro</div>
            <div>Mac Mini</div>
            <div>Macbook Air</div>
            <div>Macbook Pro</div>
        </div>
    </div>

    <div class="class">
        Samsung Products
        <div class="topic">
            Cellphones
            <div>Galaxy S6</div>
            <div>Galaxy S5</div>
            <div>Galaxy S4</div>
            <div>Galaxy Note 2</div>
            <div>Galaxy Note 1</div>
            <div>Galaxy Note</div>
        </div>
        <div class="topic">
            TV's
            <div>80"</div>
            <div>75"</div>
            <div>70"</div>
            <div>65"</div>
            <div>60"</div>
        </div>
    </div>

    <script>
        var root = document.body;
        var dfsState = 2;

        function highlight(ev) {
            // console.log(ev.target === document.body);
            dfsTarget = ev.target;
            root = document.body;
            dfsState = 2;
            console.log("Selected Element Is: ");
            console.log(dfsTarget);
            dfs(root, dfsTarget);
        }

        function dfs(root, target) {
            if (dfsState == 2) {
                if (root === target) {
                    dfsState = 1;
                }
                var x = root.children;
                // console.log("Children are:");
                // console.log(x);
                for (var i = 0; i < x.length; i++) {
                    dfs(x[i], target);
                }
            } else if (dfsState == 1) {
                console.log("Element After Selected One Is: ");
                if (root.outerHTML.indexOf("<script>") == 0) {
                    // console.log("Caught a script.");
                    root = document.body.children[0];
                }
                console.log(root);
                ////// root.classList.add("fade"); // FADE

                fadeIn(root);

                dfsState = 0;
            } else if (dfsState == 0) { // dfsState 0; terminate function
                // console.log("term");
                return;
            }

        }

        //http://stackoverflow.com/a/2695777
        function fadeIn(elem) {

            console.log(elem.fadetimer);
            console.log(elem.style.opacity);
            if (elem.fadetimer == null) {
                elem.style.opacity = "0";
                elem.fadetimer = window.setInterval(function () {
                    elem.style.opacity = +(elem.style.opacity) + .02;
                    if (elem.style.opacity > 1) {
                        clearInterval(elem.fadetimer);
                        elem.fadetimer = null;
                    }
                }, 10);
            } else if (elem.style.opacity > 1) {
                clearInterval(elem.fadetimer);
                elem.fadetimer = null;
            }


        }
    </script>


</body>